<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/favicon.png">
  <link rel="mask-icon" href="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/favicon.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"bigshuimu.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="水木君的个人博客">
<meta property="og:url" content="https://bigshuimu.github.io/page/2/index.html">
<meta property="og:site_name" content="水木君的个人博客">
<meta property="og:locale">
<meta property="article:author" content="水木君">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://bigshuimu.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>水木君的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">水木君的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/04/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95C%E8%AF%AD%E8%A8%80%E7%89%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95C%E8%AF%AD%E8%A8%80%E7%89%88/" class="post-title-link" itemprop="url">数据结构与算法C语言版</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-04-02 10:48:01" itemprop="dateCreated datePublished" datetime="2023-04-02T10:48:01+08:00">2023-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-04 20:10:13" itemprop="dateModified" datetime="2023-04-04T20:10:13+08:00">2023-04-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="线性结构"><a href="#线性结构" class="headerlink" title="线性结构"></a>线性结构</h1><p>线性结构的特点：</p>
<ul>
<li>存在唯一一个被称作“第一个”的数据元素</li>
<li>存在唯一一个被称作“最后一个”的数据元素</li>
<li>除第一个之外，集合中的每个元素均有且只有一个前驱</li>
<li>除最后一个之外，集合中的每个元素均有且只有一个后驱</li>
</ul>
<h2 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h2><h3 id="连续存储-数组"><a href="#连续存储-数组" class="headerlink" title="[连续存储]数组"></a>[连续存储]数组</h3><ul>
<li>什么叫数组：元素类型相同，大小相等</li>
<li>数组的优缺点<ul>
<li>优点：存取速度很快</li>
<li>缺点：插入删除元素很慢<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用一个结构体存储数组，pBase是一个数组用于存储数组本体，len是数组的最大长度。</span></span><br><span class="line"><span class="comment">// cnt是数组长度，也就是数组里面的元素的个数</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Arr</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> *pBase;</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="type">int</span> cnt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 快速排序，用于排序函数调用</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">QuickSort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> low, <span class="type">int</span> high)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (low &lt; high)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> i = low;</span><br><span class="line">        <span class="type">int</span> j = high;</span><br><span class="line">        <span class="type">int</span> k = arr[low];</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[j] &gt;= k)</span><br><span class="line">            &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; j)</span><br><span class="line">            &#123;</span><br><span class="line">                arr[i++] = arr[j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt; k)</span><br><span class="line">            &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; j)</span><br><span class="line">            &#123;</span><br><span class="line">                arr[j--] = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[i] = k;</span><br><span class="line">        QuickSort(arr, low, i - <span class="number">1</span>);</span><br><span class="line">        QuickSort(arr, i + <span class="number">1</span>, high);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 生成数组</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_arr</span><span class="params">(Arr *, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="comment">// 升序排序数组，使用快速排序</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">sort_arr</span><span class="params">(<span class="keyword">struct</span> Arr *)</span>;</span><br><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_arr</span><span class="params">(<span class="keyword">struct</span> Arr *)</span>;</span><br><span class="line"><span class="comment">// 翻转数组</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">inverse_arr</span><span class="params">(<span class="keyword">struct</span> Arr *)</span>;</span><br><span class="line"><span class="comment">// 追加元素</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">append_arr</span><span class="params">(<span class="keyword">struct</span> Arr *, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="comment">// 插入元素</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert_arr</span><span class="params">(<span class="keyword">struct</span> Arr *, <span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="comment">// 清空数组</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delete_arr</span><span class="params">(<span class="keyword">struct</span> Arr *)</span>;</span><br><span class="line"><span class="comment">// 判断数组是否为空</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">is_empty</span><span class="params">(<span class="keyword">struct</span> Arr *)</span>;</span><br><span class="line"><span class="comment">// 判断数组是否为满</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">is_full</span><span class="params">(<span class="keyword">struct</span> Arr *)</span>;</span><br><span class="line"><span class="comment">// 根据位置从数组中取值</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="keyword">struct</span> Arr *, <span class="type">int</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Arr</span> <span class="title">arr</span>;</span></span><br><span class="line">    init_arr(&amp;arr, <span class="number">12</span>);</span><br><span class="line">    append_arr(&amp;arr, <span class="number">2</span>);</span><br><span class="line">    append_arr(&amp;arr, <span class="number">3</span>);</span><br><span class="line">    append_arr(&amp;arr, <span class="number">4</span>);</span><br><span class="line">    append_arr(&amp;arr, <span class="number">5</span>);</span><br><span class="line">    append_arr(&amp;arr, <span class="number">1</span>);</span><br><span class="line">    show_arr(&amp;arr);</span><br><span class="line">    sort_arr(&amp;arr);</span><br><span class="line">    show_arr(&amp;arr);</span><br><span class="line">    inverse_arr(&amp;arr);</span><br><span class="line">    insert_arr(&amp;arr, <span class="number">2</span>, <span class="number">99</span>);</span><br><span class="line">    show_arr(&amp;arr);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;the number is %d&quot;</span>, get(&amp;arr, <span class="number">2</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_arr</span><span class="params">(<span class="keyword">struct</span> Arr *arr, <span class="type">int</span> length)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//为数组分配空间，int的大小乘以数组的长度, </span></span><br><span class="line"><span class="comment">//同时返回所分配空间的地址---》(int *)</span></span><br><span class="line">    arr-&gt;pBase = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * length);</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">NULL</span> == arr-&gt;pBase)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;内存分配失败&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">	<span class="comment">//分配成功就修改结构体的len和cnt值</span></span><br><span class="line">        arr-&gt;len = length;</span><br><span class="line">        arr-&gt;cnt = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据结构体的cnt判断数组是否为空，为满</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">is_empty</span><span class="params">(<span class="keyword">struct</span> Arr *pArr)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> == pArr-&gt;cnt ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">is_full</span><span class="params">(<span class="keyword">struct</span> Arr *pArr)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> pArr-&gt;len == pArr-&gt;cnt ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用快速排序，</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">sort_arr</span><span class="params">(<span class="keyword">struct</span> Arr *pArr)</span></span><br><span class="line">&#123;</span><br><span class="line">    QuickSort(pArr-&gt;pBase, <span class="number">0</span>, pArr-&gt;cnt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历结构体里面的pBase即可，pBase的长度是cnt</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_arr</span><span class="params">(<span class="keyword">struct</span> Arr *pArr)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">if</span> (is_empty(pArr))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;数组为空&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pArr-&gt;cnt; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, pArr-&gt;pBase[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以中间为分界线，数组左右交换</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">inverse_arr</span><span class="params">(<span class="keyword">struct</span> Arr *pArr)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; pArr-&gt;cnt / <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        num = pArr-&gt;pBase[i];</span><br><span class="line">        pArr-&gt;pBase[i] = pArr-&gt;pBase[pArr-&gt;cnt - i - <span class="number">1</span>];</span><br><span class="line">        pArr-&gt;pBase[pArr-&gt;cnt - i - <span class="number">1</span>] = num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组为满就不添加元素，否则就往pBase里面添加元素,注意cnt也要随之增加</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">append_arr</span><span class="params">(<span class="keyword">struct</span> Arr *pArr, <span class="type">int</span> val)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_full(pArr))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;数组已满，不能再追加！\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        pArr-&gt;pBase[pArr-&gt;cnt] = val;</span><br><span class="line">        pArr-&gt;cnt++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类似append_arr(), 从place开始往后的元素往后移动一个位置，然后给num赋值到place</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert_arr</span><span class="params">(<span class="keyword">struct</span> Arr *pArr, <span class="type">int</span> place, <span class="type">int</span> num)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_full(pArr))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;数组已满\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = pArr-&gt;cnt; i &gt; place; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            pArr-&gt;pBase[i] = pArr-&gt;pBase[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        pArr-&gt;pBase[place] = num;</span><br><span class="line">        pArr-&gt;cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组长度为空</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delete_arr</span><span class="params">(<span class="keyword">struct</span> Arr *pArr)</span></span><br><span class="line">&#123;</span><br><span class="line">    pArr-&gt;cnt = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="keyword">struct</span> Arr *pArr, <span class="type">int</span> num)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> pArr-&gt;pBase[num - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="离散结构-链表"><a href="#离散结构-链表" class="headerlink" title="[离散结构]链表"></a>[离散结构]链表</h3></li>
</ul>
</li>
</ul>
<h2 id="栈和队列"><a href="#栈和队列" class="headerlink" title="栈和队列"></a>栈和队列</h2><h2 id="串"><a href="#串" class="headerlink" title="串"></a>串</h2><h1 id="数组和广义表"><a href="#数组和广义表" class="headerlink" title="数组和广义表"></a>数组和广义表</h1><h1 id="树和二叉树"><a href="#树和二叉树" class="headerlink" title="树和二叉树"></a>树和二叉树</h1><h1 id="图"><a href="#图" class="headerlink" title="图"></a>图</h1><h1 id="动态存储管理"><a href="#动态存储管理" class="headerlink" title="动态存储管理"></a>动态存储管理</h1><h1 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h1><h1 id="内部排序"><a href="#内部排序" class="headerlink" title="内部排序"></a>内部排序</h1><h1 id="外部排序"><a href="#外部排序" class="headerlink" title="外部排序"></a>外部排序</h1><h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/03/07/%E9%85%8D%E7%BD%AE%E6%88%91%E7%9A%84windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/07/%E9%85%8D%E7%BD%AE%E6%88%91%E7%9A%84windows/" class="post-title-link" itemprop="url">配置我的windows</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-07 00:29:18 / 修改时间：19:48:19" itemprop="dateCreated datePublished" datetime="2023-03-07T00:29:18+08:00">2023-03-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="配置我的windows"><a href="#配置我的windows" class="headerlink" title="配置我的windows"></a>配置我的windows</h1><p>随着windows的使用时间增加，一些自己的配置可以让自己使用windows更加舒服。所以这是我的windows的配置的备忘。</p>
<h2 id="将CapsLK改成Esc"><a href="#将CapsLK改成Esc" class="headerlink" title="将CapsLK改成Esc"></a>将CapsLK改成Esc</h2><p><strong>make CapsLK great again!!!</strong></p>
<ol>
<li>安装AutoHotkey</li>
<li>win+r 输入 <code>shell:startup</code>:打开开机启动文件夹</li>
<li>创建<code>hello.ahk</code>文件</li>
<li>文件内容<code>Capslock::Esc</code></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/02/16/youtube-dl%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/youtube-dl%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E5%99%A8/" class="post-title-link" itemprop="url">youtube_dl视频下载器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-02-16 12:29:59 / 修改时间：12:44:15" itemprop="dateCreated datePublished" datetime="2023-02-16T12:29:59+08:00">2023-02-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>我想要从youtube批量下载一个youtuber的视频，然后发现了YouTube_dl可以满足我的需求。youtube_dl是一款视频下载器，可以用来下载各种网站的视频，它可以批量下载，而且可以编写bat脚本非常的方便。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/02/16/youtube-dl%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E5%99%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/02/12/Python%E7%88%AC%E8%99%AB%E5%B4%94%E5%BA%86%E6%89%8D%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/12/Python%E7%88%AC%E8%99%AB%E5%B4%94%E5%BA%86%E6%89%8D%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Python爬虫崔庆才课程笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-12 15:58:57" itemprop="dateCreated datePublished" datetime="2023-02-12T15:58:57+08:00">2023-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-15 21:09:29" itemprop="dateModified" datetime="2023-02-15T21:09:29+08:00">2023-02-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>由Python爬虫崔庆才课程笔记编辑整理而成，用于个人学习。</p>
<h1 id="python爬虫"><a href="#python爬虫" class="headerlink" title="python爬虫"></a>python爬虫</h1><h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>我们知道，在一台计算机中，我们可以同时打开许多软件，比如同时浏览网页、听音乐、打字等等，看似非常正常。但仔细想想，为什么计算机可以做到这么多软件同时运行呢？这就涉及到计算机中的两个重要概念：多进程和多线程了。</p>
<p>同样，在编写爬虫程序的时候，为了提高爬取效率，我们可能想同时运行多个爬虫任务。这里同样需要涉及多进程和多线程的知识。</p>
<p>本课时，我们就先来了解一下多线程的基本原理，以及在 Python 中如何实现多线程。</p>
<h3 id="多线程的含义"><a href="#多线程的含义" class="headerlink" title="多线程的含义"></a>多线程的含义</h3><p>说起多线程，就不得不先说什么是线程。然而想要弄明白什么是线程，又不得不先说什么是进程。</p>
<p>进程我们可以理解为是一个可以独立运行的程序单位，比如打开一个浏览器，这就开启了一个浏览器进程；打开一个文本编辑器，这就开启了一个文本编辑器进程。但一个进程中是可以同时处理很多事情的，比如在浏览器中，我们可以在多个选项卡中打开多个页面，有的页面在播放音乐，有的页面在播放视频，有的网页在播放动画，它们可以同时运行，互不干扰。为什么能同时做到同时运行这么多的任务呢？这里就需要引出线程的概念了，其实这一个个任务，实际上就对应着一个个线程的执行。</p>
<p>而进程呢？它就是线程的集合，进程就是由一个或多个线程构成的，线程是操作系统进行运算调度的最小单位，是进程中的一个最小运行单元。比如上面所说的浏览器进程，其中的播放音乐就是一个线程，播放视频也是一个线程，当然其中还有很多其他的线程在同时运行，这些线程的并发或并行执行最后使得整个浏览器可以同时运行这么多的任务。</p>
<p>了解了线程的概念，多线程就很容易理解了，多线程就是一个进程中同时执行多个线程，前面所说的浏览器的情景就是典型的多线程执行。</p>
<h3 id="并发和并行"><a href="#并发和并行" class="headerlink" title="并发和并行"></a>并发和并行</h3><p>说到多进程和多线程，这里就需要再讲解两个概念，那就是并发和并行。我们知道，一个程序在计算机中运行，其底层是处理器通过运行一条条的指令来实现的。</p>
<ul>
<li><strong>并发</strong>，英文叫作 concurrency。它是指同一时刻只能有一条指令执行，但是多个线程的对应的指令被快速轮换地执行。比如一个处理器，它先执行线程 A 的指令一段时间，再执行线程 B 的指令一段时间，再切回到线程 A 执行一段时间。</li>
</ul>
<p>由于处理器执行指令的速度和切换的速度非常非常快，人完全感知不到计算机在这个过程中有多个线程切换上下文执行的操作，这就使得宏观上看起来多个线程在同时运行。但微观上只是这个处理器在连续不断地在多个线程之间切换和执行，每个线程的执行一定会占用这个处理器一个时间片段，同一时刻，其实只有一个线程在执行。</p>
<ul>
<li><strong>并行</strong>，英文叫作 parallel。它是指同一时刻，有多条指令在多个处理器上同时执行，并行必须要依赖于多个处理器。不论是从宏观上还是微观上，多个线程都是在同一时刻一起执行的。</li>
</ul>
<p>并行只能在多处理器系统中存在，如果我们的计算机处理器只有一个核，那就不可能实现并行。而并发在单处理器和多处理器系统中都是可以存在的，因为仅靠一个核，就可以实现并发。</p>
<p>举个例子，比如系统处理器需要同时运行多个线程。如果系统处理器只有一个核，那它只能通过并发的方式来运行这些线程。如果系统处理器有多个核，当一个核在执行一个线程时，另一个核可以执行另一个线程，这样这两个线程就实现了并行执行，当然其他的线程也可能和另外的线程处在同一个核上执行，它们之间就是并发执行。具体的执行方式，就取决于操作系统的调度了。</p>
<h3 id="多线程适用场景"><a href="#多线程适用场景" class="headerlink" title="多线程适用场景"></a>多线程适用场景</h3><p>在一个程序进程中，有一些操作是比较耗时或者需要等待的，比如等待数据库的查询结果的返回，等待网页结果的响应。如果使用单线程，处理器必须要等到这些操作完成之后才能继续往下执行其他操作，而这个线程在等待的过程中，处理器明显是可以来执行其他的操作的。如果使用多线程，处理器就可以在某个线程等待的时候，去执行其他的线程，从而从整体上提高执行效率。</p>
<p>像上述场景，线程在执行过程中很多情况下是需要等待的。比如网络爬虫就是一个非常典型的例子，爬虫在向服务器发起请求之后，有一段时间必须要等待服务器的响应返回，这种任务就属于 IO 密集型任务。对于这种任务，如果我们启用多线程，处理器就可以在某个线程等待的过程中去处理其他的任务，从而提高整体的爬取效率。</p>
<p>但并不是所有的任务都是 IO 密集型任务，还有一种任务叫作计算密集型任务，也可以称之为 CPU 密集型任务。顾名思义，就是任务的运行一直需要处理器的参与。此时如果我们开启了多线程，一个处理器从一个计算密集型任务切换到切换到另一个计算密集型任务上去，处理器依然不会停下来，始终会忙于计算，这样并不会节省总体的时间，因为需要处理的任务的计算总量是不变的。如果线程数目过多，反而还会在线程切换的过程中多耗费一些时间，整体效率会变低。</p>
<p>所以，如果任务不全是计算密集型任务，我们可以使用多线程来提高程序整体的执行效率。尤其对于网络爬虫这种 IO 密集型任务来说，使用多线程会大大提高程序整体的爬取效率。</p>
<h3 id="Python-实现多线程"><a href="#Python-实现多线程" class="headerlink" title="Python 实现多线程"></a>Python 实现多线程</h3><p>在 Python 中，实现多线程的模块叫作 threading，是 Python 自带的模块。下面我们来了解下使用 threading 实现多线程的方法。</p>
<h4 id="Thread-直接创建子线程"><a href="#Thread-直接创建子线程" class="headerlink" title="Thread 直接创建子线程"></a>Thread 直接创建子线程</h4><p>首先，我们可以使用 <code>Thread</code> 类来创建一个线程，创建时需要指定 target 参数为运行的方法名称，如果被调用的方法需要传入额外的参数，则可以通过 Thread 的 args 参数来指定。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">target</span>(<span class="params">second</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is running&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> sleep <span class="subst">&#123;second&#125;</span>s&#x27;</span>)</span><br><span class="line">    time.sleep(second)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is ended&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is running&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">5</span>]:</span><br><span class="line">    thread = threading.Thread(target=target, args=[i])</span><br><span class="line">    thread.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is ended&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Threading MainThread <span class="keyword">is</span> running</span><br><span class="line">Threading Thread-<span class="number">1</span> <span class="keyword">is</span> running</span><br><span class="line">Threading Thread-<span class="number">1</span> sleep 1s</span><br><span class="line">Threading Thread-<span class="number">2</span> <span class="keyword">is</span> running</span><br><span class="line">Threading Thread-<span class="number">2</span> sleep 5s</span><br><span class="line">Threading MainThread <span class="keyword">is</span> ended</span><br><span class="line">Threading Thread-<span class="number">1</span> <span class="keyword">is</span> ended</span><br><span class="line">Threading Thread-<span class="number">2</span> <span class="keyword">is</span> ended</span><br></pre></td></tr></table></figure>
<p>在这里我们首先声明了一个方法，叫作 target，它接收一个参数为 second，通过方法的实现可以发现，这个方法其实就是执行了一个 time.sleep 休眠操作，second 参数就是休眠秒数，其前后都 print 了一些内容，其中线程的名字我们通过 threading.current_thread().name 来获取出来，如果是主线程的话，其值就是 MainThread，如果是子线程的话，其值就是 Thread-*。</p>
<p>然后我们通过 Thead 类新建了两个线程，target 参数就是刚才我们所定义的方法名，args 以列表的形式传递。两次循环中，这里 i 分别就是 1 和 5，这样两个线程就分别休眠 1 秒和 5 秒，声明完成之后，我们调用 start 方法即可开始线程的运行。</p>
<p>观察结果我们可以发现，这里一共产生了三个线程，分别是主线程 MainThread 和两个子线程 Thread-1、Thread-2。另外我们观察到，主线程首先运行结束，紧接着 Thread-1、Thread-2 才接连运行结束，分别间隔了 1 秒和 4 秒。这说明主线程并没有等待子线程运行完毕才结束运行，而是直接退出了，有点不符合常理。</p>
<p>如果我们想要主线程等待子线程运行完毕之后才退出，可以让每个子线程对象都调用下 join 方法，实现如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">5</span>]:</span><br><span class="line">    thread = threading.Thread(target=target, args=[i])</span><br><span class="line">    threads.append(thread)</span><br><span class="line">    thread.start()</span><br><span class="line"><span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">    thread.join()</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Threading MainThread <span class="keyword">is</span> running</span><br><span class="line">Threading Thread-<span class="number">1</span> <span class="keyword">is</span> running</span><br><span class="line">Threading Thread-<span class="number">1</span> sleep 1s</span><br><span class="line">Threading Thread-<span class="number">2</span> <span class="keyword">is</span> running</span><br><span class="line">Threading Thread-<span class="number">2</span> sleep 5s</span><br><span class="line">Threading Thread-<span class="number">1</span> <span class="keyword">is</span> ended</span><br><span class="line">Threading Thread-<span class="number">2</span> <span class="keyword">is</span> ended</span><br><span class="line">Threading MainThread <span class="keyword">is</span> ended</span><br></pre></td></tr></table></figure>
<p>这样，主线程必须等待子线程都运行结束，主线程才继续运行并结束。</p>
<h4 id="继承-Thread-类创建子线程"><a href="#继承-Thread-类创建子线程" class="headerlink" title="继承 Thread 类创建子线程"></a>继承 Thread 类创建子线程</h4><p>另外，我们也可以通过继承 Thread 类的方式创建一个线程，该线程需要执行的方法写在类的 run 方法里面即可。上面的例子的等价改写为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, second</span>):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.second = second</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is running&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> sleep <span class="subst">&#123;self.second&#125;</span>s&#x27;</span>)</span><br><span class="line">        time.sleep(self.second)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is ended&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is running&#x27;</span>)</span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">5</span>]:</span><br><span class="line">    thread = MyThread(i)</span><br><span class="line">    threads.append(thread)</span><br><span class="line">    thread.start()</span><br><span class="line"><span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">    thread.join()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is ended&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Threading MainThread <span class="keyword">is</span> running Threading Thread-<span class="number">1</span> <span class="keyword">is</span> running Threading Thread-<span class="number">1</span> sleep 1s Threading Thread-<span class="number">2</span> <span class="keyword">is</span> running Threading Thread-<span class="number">2</span> sleep 5s Threading Thread-<span class="number">1</span> <span class="keyword">is</span> ended Threading Thread-<span class="number">2</span> <span class="keyword">is</span> ended Threading MainThread <span class="keyword">is</span> ended </span><br></pre></td></tr></table></figure>
<p>可以看到，两种实现方式，其运行效果是相同的。</p>
<h4 id="守护线程"><a href="#守护线程" class="headerlink" title="守护线程"></a>守护线程</h4><p>在线程中有一个叫作守护线程的概念，如果一个线程被设置为守护线程，那么意味着这个线程是“不重要”的，这意味着，如果主线程结束了而该守护线程还没有运行完，那么它将会被强制结束。在 Python 中我们可以通过 <code>setDaemon</code> 方法来将某个线程设置为守护线程。</p>
<p>示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">target</span>(<span class="params">second</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is running&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> sleep <span class="subst">&#123;second&#125;</span>s&#x27;</span>)</span><br><span class="line">    time.sleep(second)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is ended&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is running&#x27;</span>)</span><br><span class="line">t1 = threading.Thread(target=target, args=[<span class="number">2</span>])</span><br><span class="line">t1.start()</span><br><span class="line">t2 = threading.Thread(target=target, args=[<span class="number">5</span>])</span><br><span class="line">t2.setDaemon(<span class="literal">True</span>)</span><br><span class="line">t2.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Threading <span class="subst">&#123;threading.current_thread().name&#125;</span> is ended&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>在这里我们通过 <code>setDaemon</code>方法将 <code>t2</code> 设置为了守护线程，这样主线程在运行完毕时，<code>t2</code> 线程会随着线程的结束而结束。</p>
<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Threading MainThread <span class="keyword">is</span> running Threading Thread-<span class="number">1</span> <span class="keyword">is</span> running Threading Thread-<span class="number">1</span> sleep 2s Threading Thread-<span class="number">2</span> <span class="keyword">is</span> running Threading Thread-<span class="number">2</span> sleep 5s Threading MainThread <span class="keyword">is</span> ended Threading Thread-<span class="number">1</span> <span class="keyword">is</span> ended </span><br></pre></td></tr></table></figure>
<p>可以看到，我们没有看到 Thread-2 打印退出的消息，Thread-2 随着主线程的退出而退出了。</p>
<p>不过细心的你可能会发现，这里并没有调用 join 方法，如果我们让 t1 和 t2 都调用 join 方法，主线程就会仍然等待各个子线程执行完毕再退出，不论其是否是守护线程。</p>
<h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><p>在一个进程中的多个线程是共享资源的，比如在一个进程中，有一个全局变量 count 用来计数，现在我们声明多个线程，每个线程运行时都给 count 加 1，让我们来看看效果如何，代码实现如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">global</span> count</span><br><span class="line">        temp = count + <span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.001</span>)</span><br><span class="line">        count = temp</span><br><span class="line"></span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">    thread = MyThread()</span><br><span class="line">    thread.start()</span><br><span class="line">    threads.append(thread)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">    thread.join()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Final count: <span class="subst">&#123;count&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>在这里，我们声明了 1000 个线程，每个线程都是现取到当前的全局变量 count 值，然后休眠一小段时间，然后对 count 赋予新的值。</p>
<p>那这样，按照常理来说，最终的 count 值应该为 1000。但其实不然，我们来运行一下看看。</p>
<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Final count: <span class="number">69</span> </span><br></pre></td></tr></table></figure>
<p>最后的结果居然只有 69，而且多次运行或者换个环境运行结果是不同的。</p>
<p>这是为什么呢？因为 count 这个值是共享的，每个线程都可以在执行 temp = count 这行代码时拿到当前 count 的值，但是这些线程中的一些线程可能是并发或者并行执行的，这就导致不同的线程拿到的可能是同一个 count 值，最后导致有些线程的 count 的加 1 操作并没有生效，导致最后的结果偏小。</p>
<p>所以，如果多个线程同时对某个数据进行读取或修改，就会出现不可预料的结果。为了避免这种情况，我们需要对多个线程进行同步，要实现同步，我们可以对需要操作的数据进行加锁保护，这里就需要用到 threading.Lock 了。</p>
<p>加锁保护是什么意思呢？就是说，某个线程在对数据进行操作前，需要先加锁，这样其他的线程发现被加锁了之后，就无法继续向下执行，会一直等待锁被释放，只有加锁的线程把锁释放了，其他的线程才能继续加锁并对数据做修改，修改完了再释放锁。这样可以确保同一时间只有一个线程操作数据，多个线程不会再同时读取和修改同一个数据，这样最后的运行结果就是对的了。</p>
<p>我们可以将代码修改为如下内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">global</span> count</span><br><span class="line">        lock.acquire()</span><br><span class="line">        temp = count + <span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.001</span>)</span><br><span class="line">        count = temp</span><br><span class="line">        lock.release()</span><br><span class="line"></span><br><span class="line">lock = threading.Lock()</span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">    thread = MyThread()</span><br><span class="line">    thread.start()</span><br><span class="line">    threads.append(thread)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">    thread.join()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Final count: <span class="subst">&#123;count&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>在这里我们声明了一个 lock 对象，其实就是 <code>threading.Lock</code> 的一个实例，然后在 run 方法里面，获取 count 前先加锁，修改完 count 之后再释放锁，这样多个线程就不会同时获取和修改 count 的值了。</p>
<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Final count: <span class="number">1000</span> </span><br></pre></td></tr></table></figure>
<p>这样运行结果就正常了。</p>
<p>关于 Python 多线程的内容，这里暂且先介绍这些，关于 <code>theading</code> 更多的使用方法，如信号量、队列等，可以参考官方文档：<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/threading.html#module-threading。">https://docs.python.org/zh-cn/3.7/library/threading.html#module-threading。</a></p>
<h3 id="Python-多线程的问题"><a href="#Python-多线程的问题" class="headerlink" title="Python 多线程的问题"></a>Python 多线程的问题</h3><p>由于 Python 中 GIL 的限制，导致不论是在单核还是多核条件下，在同一时刻只能运行一个线程，导致 Python 多线程无法发挥多核并行的优势。</p>
<p>GIL 全称为 Global Interpreter Lock，中文翻译为全局解释器锁，其最初设计是出于数据安全而考虑的。</p>
<p>在 Python 多线程下，每个线程的执行方式如下：</p>
<ul>
<li>获取 GIL</li>
<li>执行对应线程的代码</li>
<li>释放 GIL</li>
</ul>
<p>可见，某个线程想要执行，必须先拿到 GIL，我们可以把 GIL 看作是通行证，并且在一个 Python 进程中，GIL 只有一个。拿不到通行证的线程，就不允许执行。这样就会导致，即使是多核条件下，一个 Python 进程下的多个线程，同一时刻也只能执行一个线程。</p>
<p>不过对于爬虫这种 IO 密集型任务来说，这个问题影响并不大。而对于计算密集型任务来说，由于 GIL 的存在，多线程总体的运行效率相比可能反而比单线程更低。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/01/29/python%E7%88%AC%E8%99%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/29/python%E7%88%AC%E8%99%AB/" class="post-title-link" itemprop="url">python爬虫</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-29 14:33:35" itemprop="dateCreated datePublished" datetime="2023-01-29T14:33:35+08:00">2023-01-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-13 00:55:27" itemprop="dateModified" datetime="2023-04-13T00:55:27+08:00">2023-04-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python爬虫"><a href="#python爬虫" class="headerlink" title="python爬虫"></a>python爬虫</h1><h2 id="urllib"><a href="#urllib" class="headerlink" title="urllib"></a>urllib</h2><h3 id="使用urllib爬取百度的页面"><a href="#使用urllib爬取百度的页面" class="headerlink" title="使用urllib爬取百度的页面"></a>使用urllib爬取百度的页面</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">reponse = urllib.request.urlopen(url=url)</span><br><span class="line"></span><br><span class="line">content = reponse.read()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file=<span class="string">&#x27;./.vscode/1.txt&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(content)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># TypeError: write() argument must be str, not bytes</span></span><br></pre></td></tr></table></figure>
<p>当我试图将content保存到txt文件中，发生了报错。</p>
<p>这里我们得到的content是二进制文件，我们需要将其转化为我们能看懂的格式，也就是进行编码一下。</p>
<p><code>fp.write(content.decode(&#39;utf-8&#39;))</code></p>
<p>百度页面就成功写入到我们的<code>1.txt</code>文件中了。</p>
<h3 id="response的类型和方法"><a href="#response的类型和方法" class="headerlink" title="response的类型和方法"></a>response的类型和方法</h3><p><code>resposne = urllib.requests.urlopen(url=url)</code></p>
<p><code>resposne</code>的类型:<code>&lt;class &#39;http.client.HTTPResponse&#39;&gt;</code></p>
<p>方法</p>
<ul>
<li><code>read</code>默认读取全部，传递数字的话就是指定读取几个字节</li>
<li><code>readline</code></li>
<li><code>readlines</code></li>
<li><code>getcode</code>获取状态码</li>
<li><code>geturl</code>获取url</li>
<li><code>getheaders</code>获取请求头</li>
</ul>
<h3 id="urllib下载-urlretrieve"><a href="#urllib下载-urlretrieve" class="headerlink" title="urllib下载(urlretrieve)"></a>urllib下载(urlretrieve)</h3><p><code>urlretrieve(第一参数是文件的网络地址,第二个是本地地址)</code></p>
<p>下载百度源码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">response = urllib.request.urlretrieve(url=url, filename=<span class="string">&#x27;baidu.html&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><code>urlretrive</code>也可用于下载图片和视频等网络资源</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">img_url = <span class="string">&quot;https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202007%2F01%2F20200701114519_umgxc.png&amp;refer=http%3A%2F%2Fc-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1677571326&amp;t=f80dcf2ac99b58b32bb6e834691a2576&quot;</span></span><br><span class="line">video_url = <span class="string">&quot;https://vd4.bdstatic.com/mda-ngw9spwz9353bm7c/360p/h264/1659250469860282338/mda-ngw9spwz9353bm7c.mp4?v_from_s=hkapp-haokan-suzhou&amp;auth_key=1674981205-0-0-9b8ff1b4f8accbfc3835e1fda6de811f&amp;bcevod_channel=searchbox_feed&amp;pd=1&amp;cd=0&amp;pt=3&amp;logid=0205360586&amp;vid=131734394297378935&amp;abtest=&amp;klogid=0205360586&quot;</span></span><br><span class="line"></span><br><span class="line">urllib.request.urlretrieve(img_url, <span class="string">&#x27;lisa.jpg&#x27;</span>)</span><br><span class="line">urllib.request.urlretrieve(video_url, <span class="string">&#x27;搞笑.mp4&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="quote"><a href="#quote" class="headerlink" title="quote"></a>quote</h3><p>用于将字符串转化为<code>unicode</code>编码</p>
<p>使用场景：在我们进行百度的时候要使用unicode编码，而如果我们直接搜索<code>https://www.baidu.com/s?wd=周杰伦</code>，当然这样在浏览器中是被允许的，可是在爬虫的工作中，却无法访问到页面，我们需要将”周杰伦”转换成unicode编码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#百度搜索</span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com/s?wd=&quot;</span></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;请输入你想搜索的内容：&#x27;</span>)</span><br><span class="line">name = urllib.parse.quote(name)</span><br><span class="line">url = url + name</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>
<h3 id="urlencode"><a href="#urlencode" class="headerlink" title="urlencode"></a>urlencode</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">&#x27;wd&#x27;</span>: <span class="string">&#x27;周杰伦&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;台湾&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">data = urllib.parse.urlencode(data)</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com/s?&quot;</span> + data</span><br><span class="line">request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>
<h3 id="案例-百度翻译"><a href="#案例-百度翻译" class="headerlink" title="案例:百度翻译"></a>案例:百度翻译</h3><p>百度翻译和上面的搜索都使用了urlencode,而urlcode将字典转换成了字符串，搜索是将内容放在url里面，而百度翻译则是使用post传data。所以二者所需data的类型也不同，前者不需要编码，而后者需要编码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">something = <span class="built_in">input</span>(<span class="string">&#x27;请输入你想翻译的内容：&#x27;</span>)</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">&#x27;kw&#x27;</span>: something&#125;</span><br><span class="line">data = urllib.parse.urlencode(data).encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="comment">#urllib.request.Request里的data需要字节码，所以需要将上面的字符串进行编码处理即.encode(&#x27;utf-8&#x27;)</span></span><br><span class="line">request = urllib.request.Request(url=url, data=data, headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request).read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">obj = json.loads(response)</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>
<h3 id="案例：豆瓣电影前十页分页存储-url-ajax"><a href="#案例：豆瓣电影前十页分页存储-url-ajax" class="headerlink" title="案例：豆瓣电影前十页分页存储-url+ajax"></a>案例：豆瓣电影前十页分页存储-url+ajax</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">create_requests</span>(<span class="params">page</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;create_requests 对传入的页号所对应的页面进行爬取并返回一个该页面的response</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    _extended_summary_</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        page (int): 页号</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        json: 页面的json文件</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    url = <span class="string">&#x27;https://movie.douban.com/j/chart/top_list?type=24&amp;interval_id=100%3A90&amp;action=&amp;&#x27;</span></span><br><span class="line">    data = &#123;<span class="string">&#x27;start&#x27;</span>: (page - <span class="number">1</span>) * <span class="number">20</span>, <span class="string">&#x27;end&#x27;</span>: page * <span class="number">20</span>&#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">import</span> urllib.parse</span><br><span class="line">    <span class="keyword">import</span> urllib.request</span><br><span class="line">    data = urllib.parse.urlencode(data)</span><br><span class="line">    url += data</span><br><span class="line">    request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">    response = urllib.request.urlopen(request).read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">response, page</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;download 将页面的json数据存储到对应文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    _extended_summary_</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        response (str): 页面数据</span></span><br><span class="line"><span class="string">        page (int): 用于修改对应文件名</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;豆瓣电影&#x27;</span> + <span class="built_in">str</span>(page) + <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(response)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入起始页码：&#x27;</span>))</span><br><span class="line">    end_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入终止页码：&#x27;</span>))</span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page + <span class="number">1</span>):</span><br><span class="line">        response = create_requests(page)</span><br><span class="line">        download(response, page)</span><br></pre></td></tr></table></figure>
<h3 id="案例：kfc餐厅地址-post-ajax"><a href="#案例：kfc餐厅地址-post-ajax" class="headerlink" title="案例：kfc餐厅地址-post+ajax"></a>案例：kfc餐厅地址-post+ajax</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">create_requests</span>(<span class="params">page</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;create_requests 对传入的页号所对应的页面进行爬取并返回一个该页面的response</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    _extended_summary_</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        page (int): 页号</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        json: 页面的json文件</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    url = <span class="string">&#x27;http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx?op=cname&#x27;</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;cname&#x27;</span>: <span class="string">&#x27;北京&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;pageIndex&#x27;</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;pageSize&#x27;</span>: <span class="string">&#x27;10&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">import</span> urllib.parse</span><br><span class="line">    <span class="keyword">import</span> urllib.request</span><br><span class="line">    data = urllib.parse.urlencode(data).encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    request = urllib.request.Request(url=url, data=data, headers=headers)</span><br><span class="line">    response = urllib.request.urlopen(request).read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">response, page</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;download 将页面的json数据存储到对应文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    _extended_summary_</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        response (str): 页面数据</span></span><br><span class="line"><span class="string">        page (int): 用于修改对应文件名</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;kfc_vme50_&#x27;</span> + <span class="built_in">str</span>(page) + <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(response)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入起始页码：&#x27;</span>))</span><br><span class="line">    end_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入终止页码：&#x27;</span>))</span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page + <span class="number">1</span>):</span><br><span class="line">        response = create_requests(page)</span><br><span class="line">        download(response, page)</span><br></pre></td></tr></table></figure>
<h3 id="URLError-HTTPError"><a href="#URLError-HTTPError" class="headerlink" title="URLError,HTTPError"></a>URLError,HTTPError</h3><ol>
<li>HTTPError类是URLError类的子类</li>
<li>导入的包urllib.error.HTTPError          urllib.error.URLError</li>
<li>http错误：http错误是针对浏览器无法连接到服务器而增加出来的错误提示。引导并告诉浏览者该页是哪里出了问题。</li>
<li>通过urllib发送请求的时候，有可能会发送失败，这个时候如果想让你的代码更加的健壮，可以通过try-except进行捕获异常，异常有两类，URLError＼HTTPError</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.error</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment">#主机号都错了，URLError</span></span><br><span class="line">    url1 = <span class="string">&quot;https://shabinumberone.com/1123&quot;</span></span><br><span class="line">    request = urllib.request.Request(url=url1, headers=headers)</span><br><span class="line">    reponse = urllib.request.urlopen(request).read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.HTTPError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;起飞失败&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;系统正在升级！！！&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment">#主机号对的，只是文件错了 HTTPError</span></span><br><span class="line">    url2 = <span class="string">&quot;https://www.bilibili.com/video/BV1eA411C7uiii&quot;</span></span><br><span class="line">    request = urllib.request.Request(url=url2, headers=headers)</span><br><span class="line">    reponse = urllib.request.urlopen(request).read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.HTTPError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;起飞失败&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;系统正在升级！！！&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#需求 使用handler访问百度，并保存源码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment">#1、获取handler对象</span></span><br><span class="line">handler = urllib.request.HTTPHandler()</span><br><span class="line"></span><br><span class="line"><span class="comment">#2、获取opener对象</span></span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line"></span><br><span class="line"><span class="comment">#3、调用open方法</span></span><br><span class="line">response = opener.<span class="built_in">open</span>(request)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>
<h2 id="xpath"><a href="#xpath" class="headerlink" title="xpath"></a>xpath</h2><h3 id="获取百度一下的文字"><a href="#获取百度一下的文字" class="headerlink" title="获取百度一下的文字"></a>获取百度一下的文字</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用xpath获取百度页面的“百度一下文字”</span></span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">reponse = urllib.request.urlopen(request)</span><br><span class="line">content = reponse.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">tree = etree.HTML(content) </span><br><span class="line">result = tree.xpath(<span class="string">&#x27;//input[@id=&quot;su&quot;]/@value&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="comment">#&#x27;//&#x27;代表子孙节点,上面命令代表搜索所有id为su的子孙input节点的value值</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="批量下载图片-无反爬"><a href="#批量下载图片-无反爬" class="headerlink" title="批量下载图片(无反爬)"></a>批量下载图片(无反爬)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment">#需求：下载前十页的图片</span></span><br><span class="line"><span class="comment">#（1）请求对象的定制</span></span><br><span class="line"><span class="comment">#（2）获取网页源码</span></span><br><span class="line"><span class="comment">#（3）下载</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#总结：</span></span><br><span class="line"><span class="comment"># 1、有的图片的url后面还有冗余信息没有处理，所以导致有的下载下来的图片无法显示</span></span><br><span class="line"><span class="comment"># 2、避免爬虫测试网站阻止访问，所以在访问每一页后都sleep了1s</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_request</span>(<span class="params">page</span>):</span><br><span class="line">    <span class="keyword">if</span> (page == <span class="number">1</span>):</span><br><span class="line">        url = <span class="string">&#x27;https://ssr1.scrape.center&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        url = <span class="string">&#x27;https://ssr1.scrape.center/page/&#x27;</span> + <span class="built_in">str</span>(page)</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">    reponse = urllib.request.urlopen(request)</span><br><span class="line">    content = reponse.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img</span>(<span class="params">content</span>):</span><br><span class="line">    tree = etree.HTML(content)  <span class="comment"># type: ignore</span></span><br><span class="line">    img_list = tree.xpath(<span class="string">&#x27;//*[@id=&quot;index&quot;]/div[1]/div[1]/div//img/@src&#x27;</span>)</span><br><span class="line">    name_list = tree.xpath(<span class="string">&#x27;//*[@id=&quot;index&quot;]/div[1]/div[1]/div//h2/text()&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(name_list)):</span><br><span class="line">        name = name_list[i]</span><br><span class="line">        src = img_list[i]</span><br><span class="line">        url = <span class="string">&#x27;ht&#x27;</span> + src[<span class="number">2</span>:]</span><br><span class="line">        <span class="keyword">import</span> os</span><br><span class="line">        <span class="keyword">if</span> (os.path.exists(<span class="string">&#x27;./movie_img&#x27;</span>) == <span class="literal">False</span>):</span><br><span class="line">            os.mkdir(<span class="string">&#x27;./movie_img&#x27;</span>)</span><br><span class="line">        urllib.request.urlretrieve(url=url,</span><br><span class="line">                                   filename=<span class="string">&#x27;./movie_img/&#x27;</span> + name + <span class="string">&#x27;.jpg&#x27;</span>)</span><br><span class="line">        <span class="comment"># print(name + &quot;||||&quot; + url)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入第一页：&quot;</span>))</span><br><span class="line">    end_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入最后一页：&quot;</span>))</span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page + <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;正在下载第&#x27;</span> + <span class="built_in">str</span>(page) + <span class="string">&#x27;页&#x27;</span>)</span><br><span class="line">        content = create_request(page)</span><br><span class="line">        get_img(content)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Done!!!&#x27;</span>)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="jsonpath"><a href="#jsonpath" class="headerlink" title="jsonpath"></a>jsonpath</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/fallenjency/article/details/123276600">jsonpath教程</a></p>
<h3 id="jsonpath读取网站电影名"><a href="#jsonpath读取网站电影名" class="headerlink" title="jsonpath读取网站电影名"></a>jsonpath读取网站电影名</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> jsonpath</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">&#x27;https://spa1.scrape.center/api/movie/?limit=10&amp;offset=0&#x27;</span></span><br><span class="line">request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">reponse = urllib.request.urlopen(request)</span><br><span class="line"></span><br><span class="line">obj = json.load(reponse)</span><br><span class="line">content = jsonpath.jsonpath(obj, <span class="string">&#x27;$..name&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(<span class="built_in">open</span>(<span class="string">&#x27;./.vscode/19bs4.html&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#根据标签查找节点</span></span><br><span class="line"><span class="comment">#1.找到第一个a标签</span></span><br><span class="line"><span class="comment"># print(soup.a)</span></span><br><span class="line"><span class="comment">#2.获取标签的属性值</span></span><br><span class="line"><span class="comment"># print(soup.a.attrs)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bs4的一些函数</span></span><br><span class="line"><span class="comment"># 1.find 返回第一个符合条件的节点</span></span><br><span class="line"><span class="comment"># print(soup.find(&#x27;a&#x27;))</span></span><br><span class="line"><span class="comment"># print(soup.find(&#x27;a&#x27;, id=&#x27;a2&#x27;))</span></span><br><span class="line"><span class="comment">#注意：当查询class属性值的时候，因为和python关键字重合，所以要写成class_</span></span><br><span class="line"><span class="comment"># print(soup.find(&#x27;a&#x27;, class_=&#x27;&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.find_all</span></span><br><span class="line"><span class="comment"># print(soup.find_all(&#x27;a&#x27;))</span></span><br><span class="line"><span class="comment"># print(soup.find_all([&#x27;a&#x27;, &#x27;span&#x27;]))</span></span><br><span class="line"><span class="comment">#limit作用是限制查询前几个</span></span><br><span class="line"><span class="comment"># print(soup.find_all(&#x27;li&#x27;, limit=2))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3.select</span></span><br><span class="line"><span class="comment"># select方法返回的是一个列表，并且会返回多个数据</span></span><br><span class="line"><span class="comment"># select可以使用类选择器,&#x27;.&#x27;代表class,&#x27;#&#x27;代表id</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;#a1&#x27;))</span></span><br><span class="line"><span class="comment">#属性选择器</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;a[id]&#x27;))  #查询所有有id的a标签</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;a[id=&quot;a1&quot;]&#x27;))  #查询id为a1的a标签</span></span><br><span class="line"><span class="comment">#找到所有的a标签和li标签</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;a,li&#x27;))</span></span><br><span class="line"><span class="comment">#层级选择器</span></span><br><span class="line"><span class="comment">#--后代选择器</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;div li&#x27;))</span></span><br><span class="line"><span class="comment">#--子代选择器</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;div &gt; ul &gt; li&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 节点信息</span></span><br><span class="line"><span class="comment">#如果标签对象中，只有内容，那么string和get_text()都可以使用</span></span><br><span class="line"><span class="comment">#如果标签对象中，出了内容还有标签，那么string就获取不到数据 而get_text()是可以获取到数据</span></span><br><span class="line"><span class="comment"># obj = soup.select(&#x27;#d1&#x27;)[0]</span></span><br><span class="line"><span class="comment"># print(obj.string)</span></span><br><span class="line"><span class="comment"># print(obj.get_text())</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#节点属性</span></span><br><span class="line">obj = soup.select(<span class="string">&#x27;#p1&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(obj.name)  <span class="comment">#name是标签名字</span></span><br><span class="line"><span class="built_in">print</span>(obj.attrs)  <span class="comment">#attrs将标签所有属性值按字典返回</span></span><br><span class="line"><span class="comment">#获取p的class值</span></span><br><span class="line"><span class="built_in">print</span>(obj.attrs.get(<span class="string">&#x27;class&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(obj.get(<span class="string">&#x27;class&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(obj[<span class="string">&#x27;class&#x27;</span>])</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="常用元字符"><a href="#常用元字符" class="headerlink" title="常用元字符"></a>常用元字符</h3><p>元字符：具有固定含义的特殊符号</p>
<ul>
<li><code>.</code>除换行符之外任意字符</li>
<li><code>\w</code>字母或数字或下划线</li>
<li><code>\s</code>任意的空白符</li>
<li><code>\d</code>数字</li>
<li><code>\n</code>一个换行符</li>
<li><code>\t</code>一个制表符</li>
<li><code>^</code>字符串的开头</li>
<li><code>$</code>字符串的结尾</li>
<li><code>\W</code>非字符或数字或下划线</li>
<li><code>\D</code>非数字</li>
<li><code>\S</code>非空白符</li>
<li><code>a|b</code>字符a或字符b</li>
<li><code>()</code>匹配括号内的表达式，也表示一个组</li>
<li><code>[...]</code>匹配字符组中的字符</li>
<li><code>[^...]</code>匹配除了字符组中字符的所有字符</li>
</ul>
<h3 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h3><p>量词：控制前面的元字符出现的次数</p>
<ul>
<li><code>*</code>重复零次或更多次</li>
<li><code>+</code>重复一次或更多次</li>
<li><code>?</code>重复零次或一次</li>
<li><code>&#123;n&#125;</code>重复n次</li>
<li><code>&#123;n,&#125;</code>重复n次或更多次</li>
<li><code>&#123;n,m&#125;</code>重复n次到m次</li>
</ul>
<h3 id="贪婪匹配和惰性匹配"><a href="#贪婪匹配和惰性匹配" class="headerlink" title="贪婪匹配和惰性匹配"></a>贪婪匹配和惰性匹配</h3><ul>
<li><code>.*</code>贪婪匹配</li>
<li><code>.*?</code>惰性匹配</li>
</ul>
<hr>
<h2 id="selenium"><a href="#selenium" class="headerlink" title="selenium"></a>selenium</h2><h3 id="安装chromedriver和selenium"><a href="#安装chromedriver和selenium" class="headerlink" title="安装chromedriver和selenium"></a>安装chromedriver和selenium</h3><ol>
<li>下载chromedriver.exe</li>
<li>将chromedriver.exe复制到chrome安装路径(chrome的exe同级目录)，同时复制到python的目录里</li>
<li>将chrome的安装路径添加到path</li>
<li>pip install slenium</li>
</ol>
<h3 id="selenium的元素定位"><a href="#selenium的元素定位" class="headerlink" title="selenium的元素定位"></a>selenium的元素定位</h3><p>元素定位：自动化要做的就是模拟鼠标和键盘来操作来操作这些元素，点击、输入等等。操作这些元素前首先要找到它们，WebDriver提供很多定位元素的方法:<a target="_blank" rel="noopener" href="https://blog.csdn.net/beichanbb/article/details/122240155">find_element</a></p>
<p>简单上手：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">brower = webdriver.Chrome()</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com/&#x27;</span></span><br><span class="line">brower.get(url)</span><br><span class="line"></span><br><span class="line">button = brower.find_element(By.XPATH, <span class="string">&#x27;//input[@id=&quot;su&quot;]&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">brower = webdriver.Chrome()</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com/&#x27;</span></span><br><span class="line">brower.get(url)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">input</span> = brower.find_element(<span class="string">&#x27;id&#x27;</span>, <span class="string">&quot;kw&quot;</span>)</span><br><span class="line"><span class="built_in">input</span>.send_keys(<span class="string">&#x27;周杰伦&#x27;</span>)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">search = brower.find_element(<span class="string">&#x27;id&#x27;</span>, <span class="string">&quot;su&quot;</span>)</span><br><span class="line">search.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">js_bottom = <span class="string">&#x27;document.documentElement.scrollTop=100000&#x27;</span></span><br><span class="line">brower.execute_script(js_bottom)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">next_page = brower.find_element(By.XPATH, <span class="string">&quot;//a[@class=&#x27;n&#x27;]&quot;</span>)</span><br><span class="line">next_page.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">brower.back()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">brower.forward()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">brower.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="chrome-handless"><a href="#chrome-handless" class="headerlink" title="chrome handless"></a>chrome handless</h3><p>这一段配置是写好的，可以直接照抄</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">share_browser</span>():</span><br><span class="line">    chrome_options = Options()</span><br><span class="line">    chrome_options .add_argument( <span class="string">&#x27; --headless&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument( <span class="string">&#x27; --disable-gpu&#x27;</span>)</span><br><span class="line">    <span class="comment"># path是你自己的chrome浏览器的文件路径</span></span><br><span class="line">    path = <span class="string">r&#x27;C:\Program Files\Google\Chrome\Application\chrome.exe&#x27;</span></span><br><span class="line">    chrome_options. binary_location = path</span><br><span class="line">    browser = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line">    <span class="keyword">return</span> browser</span><br><span class="line">browser = share_browser()</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">browser.get(url)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="requests"><a href="#requests" class="headerlink" title="requests"></a>requests</h2><h3 id="response的属性以及类型"><a href="#response的属性以及类型" class="headerlink" title="response的属性以及类型"></a>response的属性以及类型</h3><div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>models.Response r.tex</th>
</tr>
</thead>
<tbody>
<tr>
<td>r.text</td>
<td>获取网站源码</td>
</tr>
<tr>
<td>r.encoding</td>
<td>访问或定制编码方式</td>
</tr>
<tr>
<td>r.url</td>
<td>获取请求的ur</td>
</tr>
<tr>
<td>v</td>
<td>响应的字节类型</td>
</tr>
<tr>
<td>r.status_code</td>
<td>响应的状态码</td>
</tr>
<tr>
<td>r.headers</td>
<td>响应的头信息</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">&#x27;kw&#x27;</span>: <span class="string">&#x27;eye&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(headers=headers, url=url, data=data)</span><br><span class="line">content = response.text</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">obj = json.loads(content)</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>
<ul>
<li>post请求不需要编解码</li>
<li>post请求的参数是data</li>
</ul>
<h3 id="requests登陆古诗文网"><a href="#requests登陆古诗文网" class="headerlink" title="requests登陆古诗文网"></a>requests登陆古诗文网</h3><ol>
<li><p>首先通过输出错误的账号密码，找到登陆接口(在network里面，名字一般带login)</p>
</li>
<li><p>分析request的data</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;__VIEWSTATE&#x27;</span>:</span><br><span class="line">    <span class="string">&#x27;5RPZ6LJU7KKM7C7VzCFf2pL9LmIteosVELlLLdamdHcTFpGAd6na5T0tne6tzfX6q1THIJeEE0+aUQKJg4vp8UUVXyQqyov9iuZj6ue9cwUv3hkD5alVFu7Gq+QjnGurP+b5enWBUerjStO1NnS+5BlDgjw=&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;__VIEWSTATEGENERATOR&#x27;</span>: <span class="string">&#x27;C93BE1AE&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;from:http&#x27;</span>: <span class="string">&#x27;//so.gushiwen.cn/user/collect.aspx&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;2982534677@qq.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&#x27;EXWRa6NrQq572Ufdsa&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;code&#x27;</span>: <span class="string">&#x27;U46S&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;denglu&#x27;</span>: <span class="string">&#x27;登录&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以发现<strong>VIEWSTATE,</strong>VIEWSTATEGENERATOR,code的是不固定的值,在页面源码中寻找</p>
</li>
</ol>
<hr>
<h2 id="存储方式"><a href="#存储方式" class="headerlink" title="存储方式"></a>存储方式</h2><h3 id="1-文本文件"><a href="#1-文本文件" class="headerlink" title="1.文本文件"></a>1.文本文件</h3><p>像是txt文件或者MP3，MP4,json等文件可以使用python的file操作函数</p>
<p>以requests为例子,写入字符文件时需要进行编码处理，而对字节文件则不用。<br>但是要注意读取response的类型的不同，一个是<strong>text</strong>,一个是<strong>content</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">response = requests.get(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">#response是一个txt文件</span></span><br><span class="line">content = response.text</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding = <span class="string">&#x27;utf-8&#x27;</span>)<span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(context)</span><br><span class="line"><span class="comment">#response是一个字节文件，json、MP3、img</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.json&#x27;</span>,<span class="string">&#x27;wb&#x27;</span>)<span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(response.content)</span><br></pre></td></tr></table></figure></p>
<h3 id="使用pandas存储excel"><a href="#使用pandas存储excel" class="headerlink" title="使用pandas存储excel"></a>使用pandas存储excel</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#img_name，img_score</span></span><br><span class="line">data = pd.DataFrame()</span><br><span class="line">data[<span class="string">&#x27;name&#x27;</span>] = img_name</span><br><span class="line">data[<span class="string">&#x27;score&#x27;</span>] = img_score</span><br><span class="line">data.to_excel(<span class="string">&quot;movie.xlsx&quot;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h3 id="将数据存储到mysql"><a href="#将数据存储到mysql" class="headerlink" title="将数据存储到mysql"></a>将数据存储到mysql</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#连接数据库所需要的信息</span></span><br><span class="line">mysql_local = &#123;</span><br><span class="line">    <span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;port&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">    <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;db&#x27;</span>: <span class="string">&#x27;data&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#img_name,img_grade是两个列表，data是可迭代对象zip</span></span><br><span class="line">data = <span class="built_in">zip</span>(img_name, img_grade)</span><br><span class="line"><span class="comment">#连接数据库</span></span><br><span class="line">conn = pymysql.connect(**mysql_local)</span><br><span class="line">cursor = conn.cursor()</span><br><span class="line"><span class="comment">#sql查询语句</span></span><br><span class="line">sql = <span class="string">f&#x27;INSERT INTO film_info(film_name,score)VALUES(&quot;%s&quot;,%s)&#x27;</span></span><br><span class="line">cursor.executemany(sql, data)</span><br><span class="line">conn.commit()</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="scrapy"><a href="#scrapy" class="headerlink" title="scrapy"></a>scrapy</h2><p><img src="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/img_for_typora/20230209202744.png" alt="scrapy工作流程"></p>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><ol>
<li>创建爬虫的项目         <code>scrapy startproject projectname</code>,注意：projectname不能数字开头和携带中文</li>
<li>创建爬虫文件             <ol>
<li>在<code>projectname/spiders</code>文件夹内去创建爬虫文件</li>
<li>创建爬虫文件<code>scrapy genspider 爬虫文件的名字 要爬取的网页</code> eg:<code>scrapy genspider baidu www.baidu.com</code></li>
</ol>
</li>
<li>运行爬虫代码  <code>scrapy crawl</code>爬虫的名字<ol>
<li>注释掉<code>ROBOTSTXT_OBEY = True</code>,那么我们的爬虫就不遵守robots协议了</li>
</ol>
</li>
</ol>
<h3 id="scrapy项目结构"><a href="#scrapy项目结构" class="headerlink" title="scrapy项目结构"></a>scrapy项目结构</h3><p>项目名字</p>
<ul>
<li>spiders文件夹(存储的是爬虫文件)<ul>
<li>init</li>
<li>自定义的爬虫文件———scrapy项目的核心功能文件</li>
</ul>
</li>
<li>init</li>
<li>items(定义数据结构，爬取的数据都包含哪些)</li>
<li>middleware(中间件-代理)</li>
<li>pipelines(管道-用来处理下载的数据)</li>
<li>settings(配置文件-robots协议-ua定义等)</li>
</ul>
<h3 id="response的属性和方法"><a href="#response的属性和方法" class="headerlink" title="response的属性和方法"></a>response的属性和方法</h3><ul>
<li>response.text 获取的是响应的字符串</li>
<li>response.body 获取的是二进制数据</li>
<li>response.xpath 可以直接通过xpath方法来解析response中的内容</li>
<li>response.extract() 提取seletor对象的data属性值</li>
<li>response.extract_first() 提取的seletor列表的第一个数据</li>
<li></li>
</ul>
<h3 id="scrapy工作流程"><a href="#scrapy工作流程" class="headerlink" title="scrapy工作流程"></a>scrapy工作流程</h3><ol>
<li>引擎向spiders要url</li>
<li>引擎将要爬取的url给调度器</li>
<li>调度器会将url生成请求对象放入到指定的队列中</li>
<li>从队列中出列一个请求</li>
<li>引擎将请求交给下载器进行处理</li>
<li>下载器发送请求获取互联网数据</li>
<li>下载器将数据返回给引擎</li>
<li>引擎将数据再次给到spiders</li>
<li>spiders通过xpath解析该数据，得到数据或者url</li>
<li>spiders将数据或者url给到引擎</li>
<li>引擎判断该数据是url还是数据，交给管道(item pipeline)处理，是url交给调度器处理</li>
</ol>
<h3 id="Feed-Exports"><a href="#Feed-Exports" class="headerlink" title="Feed Exports"></a>Feed Exports</h3><p>scrapy 提供的Feed Exports可以将抓取的所有内容以json，jsonlines，csv, xml, pickle, marshal等格式输出<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl quotes -o quotes.json</span><br><span class="line">scrapy crawl quotes -o quotes.js</span><br><span class="line">scrapy crawl quotes -o quotes.jsonlines</span><br><span class="line">scrapy crawl quotes -o quotes.csv</span><br><span class="line">scrapy crawl quotes -o quotes.xml</span><br><span class="line">scrapy crawl quotes -o quotes.pickle</span><br><span class="line">scrapy crawl quotes -o quotes.marshal</span><br><span class="line">scrapy crawl quotes -o ftp://user:pass@ftp.example.com/path/to/quotes.csv</span><br></pre></td></tr></table></figure></p>
<h3 id="scrapy案例：quotes"><a href="#scrapy案例：quotes" class="headerlink" title="scrapy案例：quotes"></a>scrapy案例：quotes</h3><p>quotes是scrapy的官方示例案例。<br><a href="https://quotes.toscrape.com/" target="_blank">网址</a><br><img src="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/img_for_typora/20230412210506.png" alt=""></p>
<p>每个单位有三个数据：text，author，tags</p>
<h4 id="1、新建项目"><a href="#1、新建项目" class="headerlink" title="1、新建项目"></a>1、新建项目</h4><p><code>scrapy startproject scrapytutorial</code> 新建项目</p>
<p><code>scrapy genspider quotes quotes.toscrape.com</code> 创建爬虫文件</p>
<p>注释<code>ROBOTSTEXT</code>,不遵守robots协议</p>
<h4 id="2、quotes-py"><a href="#2、quotes-py" class="headerlink" title="2、quotes.py"></a>2、quotes.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapytutorial.items <span class="keyword">import</span> ScrapytutorialItem</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QuotesSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&quot;quotes&quot;</span></span><br><span class="line">    allowed_domains = [<span class="string">&quot;quotes.toscrape.com&quot;</span>]</span><br><span class="line">    start_urls = [<span class="string">&quot;https://quotes.toscrape.com&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">100</span>)</span><br><span class="line">        quotes = response.xpath(<span class="string">&quot;//div[@class=&#x27;quote&#x27;]&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> quotes:</span><br><span class="line">	<span class="comment"># 取出text并将text的双引号去掉</span></span><br><span class="line">            text = quote.xpath(<span class="string">&#x27;span[@class=&quot;text&quot;]/text()&#x27;</span>).extract_first().replace(<span class="string">&#x27;&quot;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            author = quote.xpath(<span class="string">&#x27;span/small[@class=&quot;author&quot;]/text()&#x27;</span>).extract_first()</span><br><span class="line">            tags = quote.xpath(<span class="string">&#x27;div[@class=&quot;tags&quot;]/a/text()&#x27;</span>).extract()</span><br><span class="line">	<span class="comment"># 把item传给engine,然后engine把它传给item pipelines</span></span><br><span class="line">            item = ScrapytutorialItem(text=text, author=author, tags=tags)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line">        <span class="built_in">next</span> = response.xpath(<span class="string">&#x27;//li[@class=&quot;next&quot;]/a/@href&#x27;</span>).extract_first()</span><br><span class="line">        url = response.urljoin(<span class="built_in">next</span>)</span><br><span class="line">        <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br></pre></td></tr></table></figure>
<h4 id="3、items-py"><a href="#3、items-py" class="headerlink" title="3、items.py"></a>3、items.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># https://docs.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ScrapytutorialItem</span>(scrapy.Item):</span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    text = scrapy.Field()</span><br><span class="line">    author = scrapy.Field()</span><br><span class="line">    tags = scrapy.Field()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4、保存数据"><a href="#4、保存数据" class="headerlink" title="4、保存数据"></a>4、保存数据</h4><p><strong>保存数据到一个json文件中</strong><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl quotes -o quotes.json</span><br></pre></td></tr></table></figure><br><strong>每一个item输出到一行json文件</strong><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl quotes -o quotes.jsonlines</span><br><span class="line"># 下面是上面的简写</span><br><span class="line">scrapy crawl quotes -o quotes.jl</span><br></pre></td></tr></table></figure></p>
<p>上面都是保存到一个文件内，第一种是一个[]在外面，里面的每个数据用{}包住，{}之间有’,’分割。下面的方法没有[]和’,’。</p>
<h4 id="5、保存到mongodb"><a href="#5、保存到mongodb" class="headerlink" title="5、保存到mongodb"></a>5、保存到mongodb</h4><h5 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a>settings.py</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明管道和管道的优先级</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">    <span class="string">&#x27;scrapytutorial.pipelines.TextPipeline&#x27;</span>: <span class="number">300</span>,</span><br><span class="line">    <span class="string">&#x27;scrapytutorial.pipelines.MongoDBPipeline&#x27;</span>: <span class="number">400</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># mongo数据库</span></span><br><span class="line">MONGODB_CONNECTION_STRING = <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line"><span class="comment"># 数据库名</span></span><br><span class="line">MONGODB_DATABASE = <span class="string">&#x27;scrapytutorial&#x27;</span></span><br></pre></td></tr></table></figure>
<h5 id=""><a href="#" class="headerlink" title=" "></a> </h5><h2 id="CrawlSpider"><a href="#CrawlSpider" class="headerlink" title="CrawlSpider"></a>CrawlSpider</h2><ol>
<li><p>继承自scrapy.Spider</p>
</li>
<li><p>独门秘笈<br>CrawlSpider可以定义规则，再解析html内容的时候，可以根据链接规则提取出指定的链接，然后再向这些链接发送请求<br>所以，如果有需要跟进链接的需求，意思就是爬取了网页之后，需要提取链接再次爬取，使用crawlSpider是非常合适的</p>
</li>
<li><p>提取链接<br>链接提取器，在这里就可以写规则提取指定链接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scrapy.linkextractors.LinkExtractor( </span><br><span class="line">    allow=(),<span class="comment">#正则表达式 提取符合正则的链接</span></span><br><span class="line">    deny=(),<span class="comment">#（不用）正则表达式 不提取符合正则的链接</span></span><br><span class="line">    allow_domains=(),<span class="comment">#（不用）允许的域名</span></span><br><span class="line">    deny_domains=(),<span class="comment">#（不用）不允许的域名</span></span><br><span class="line">	restrict＿xpaths＝（）,<span class="comment">#xpath，提取符合xpath规则的链接 </span></span><br><span class="line">    restrict_css=()<span class="comment">#提取符合选择器规则的链接）</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>模拟使用<br>正则用法：<code>links1 = LinkExtractor(allow=r&#39;list_23_\d+\.html&#39;)</code><br>xpath用法：<code>links2 = LinkExtractor(restrict_xpaths=r&#39;//div[@class=＂x＂］&#39;）</code></p>
<p>css用法：<code>links3 = LinkExtractor(restrict_css=&#39;.x&#39;)</code></p>
</li>
<li><p>提取连接<br><code>link.extract_links(response)</code></p>
</li>
</ol>
<h3 id="CrawlSpider案例"><a href="#CrawlSpider案例" class="headerlink" title="CrawlSpider案例"></a>CrawlSpider案例</h3><p>需求：读书网数据入库</p>
<ol>
<li>创建项目：<code>crapy startproject dushuproject</code></li>
<li>跳转到spiders路径 <code>cd\dushuproject\dushuproject\spiders</code></li>
<li>创建爬虫类：<code>scrapy genspider -t crawl read www．dushu．com</code></li>
<li>items</li>
<li>spiders </li>
<li>settings </li>
<li>pipelines<br>数据保存到本地<br>数据保存到mysq1数据库</li>
</ol>
<h3 id="数据入库"><a href="#数据入库" class="headerlink" title="数据入库"></a>数据入库</h3><ol>
<li><p>settings配置参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DB_HOST = <span class="string">&#x27;192.168.231.128&#x27;</span> </span><br><span class="line">DB_PORT = <span class="number">3306</span></span><br><span class="line">DB_USER = <span class="string">&#x27;root&#x27;</span> </span><br><span class="line">DB_PASSWORD = <span class="string">&#x27;1234&#x27;</span> </span><br><span class="line">DB_NAME = <span class="string">&#x27;test&#x27;</span></span><br><span class="line">DB_CHARSET = <span class="string">&#x27;utf8&#x27;</span> </span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>管道配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.utils.project <span class="keyword">import</span> get_project_settings <span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MysqlPipeline</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">＃＿init＿方法和<span class="built_in">open</span>＿spider的作用是一样的 </span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/01/12/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/12/Linux/" class="post-title-link" itemprop="url">Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-12 09:40:29" itemprop="dateCreated datePublished" datetime="2023-01-12T09:40:29+08:00">2023-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-05-25 23:00:54" itemprop="dateModified" datetime="2023-05-25T23:00:54+08:00">2023-05-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>Linux一切皆文件</p>
<h3 id="1、-Linux目录结构"><a href="#1、-Linux目录结构" class="headerlink" title="1、 Linux目录结构"></a>1、 Linux目录结构</h3><p><code>/</code> 根目录</p>
<ul>
<li><code>/root</code> 该目录为系统管理员，也称作超级权限者的用户主目录<ul>
<li><code>/root/Desktop</code></li>
<li><code>/root/Maildir</code></li>
<li>…</li>
</ul>
</li>
<li><code>/bin</code> Binary，这个目录存放着最经常使用的命令</li>
<li><code>/sbin</code> s是system的意思，这里存放的是系统管理员使用的系统管理程序</li>
<li><code>/boot</code><strong>[常用]</strong>  这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件</li>
<li><code>/dev</code> 类似于Windows的设备管理器，把所有的硬件用文件的形式存储</li>
<li><code>/etc</code><strong>[常用]</strong> 所有系统管理所需要的配置文件和子目录</li>
<li><code>/home</code> 存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账户命名的</li>
<li><code>/var</code> 存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下，包括各种日志文件</li>
<li><code>/lib</code> 共享库，包括系统和应用程序，例如系统开机所需要的最基本的动态链接共享库</li>
<li><code>/usr</code><strong>[常用]</strong> 存放用户的很多应用程序和文件，类似于windows下的program files目录<ul>
<li><code>/usr/bin</code></li>
<li><code>/usr/lib</code></li>
<li>…</li>
</ul>
</li>
<li><code>/opt</code> 主机额外安装软件所摆放的目录。</li>
<li><code>tmp</code> 存放临时文件</li>
<li>…</li>
</ul>
<p>注：Linux路径使用的是斜杠<code>/</code>，而Windows使用的是反斜杠<code>\</code></p>
<h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><h3 id="1、配置网络-ip-地址"><a href="#1、配置网络-ip-地址" class="headerlink" title="1、配置网络 ip 地址"></a>1、配置网络 ip 地址</h3><p><code>ifconfig</code> network interfaces configuring 配置网络接口 </p>
<h3 id="2、修改IP地址"><a href="#2、修改IP地址" class="headerlink" title="2、修改IP地址"></a>2、修改IP地址</h3><ul>
<li><p>查看ip配置文件</p>
<p><code>vim /etc/sysconfig/network-scripts/ifcfg-ens33</code></p>
</li>
</ul>
<h2 id="shell常用快捷键"><a href="#shell常用快捷键" class="headerlink" title="shell常用快捷键"></a>shell常用快捷键</h2><div class="table-container">
<table>
<thead>
<tr>
<th>代码</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>CTRL + C</td>
<td>中断；终止当前行编辑，另起新行</td>
</tr>
<tr>
<td>CTRL + L</td>
<td>清屏</td>
</tr>
<tr>
<td>CTRL + A</td>
<td>光标移至行首</td>
</tr>
<tr>
<td>CTRL + E</td>
<td>光标移至行尾</td>
</tr>
<tr>
<td>CTRL + U</td>
<td>向前删除至行首</td>
</tr>
<tr>
<td>CTRL + K</td>
<td>向后删除至行尾</td>
</tr>
<tr>
<td>CTRL + B</td>
<td>光标向行首移动一个字符</td>
</tr>
<tr>
<td>CTRL + F</td>
<td>光标向行尾移动一个字符</td>
</tr>
<tr>
<td>CTRL + H</td>
<td>向行首删除一个字符</td>
</tr>
<tr>
<td>ESC + B</td>
<td>光标左（前）移一个单词</td>
</tr>
<tr>
<td>ESC + F</td>
<td>光标右（后）移一个单词</td>
</tr>
</tbody>
</table>
</div>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><div class="table-container">
<table>
<thead>
<tr>
<th>代码</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>cd</td>
<td>打开文件夹</td>
</tr>
<tr>
<td>cat</td>
<td>查看文件内容</td>
</tr>
<tr>
<td>neofetch</td>
<td>显示系统信息</td>
</tr>
<tr>
<td>mkdir</td>
<td>创建目录</td>
</tr>
<tr>
<td>rmdir</td>
<td>删除空目录</td>
</tr>
</tbody>
</table>
</div>
<h2 id="linux找不到命令"><a href="#linux找不到命令" class="headerlink" title="linux找不到命令"></a>linux找不到命令</h2><ul>
<li>首先确保自己已经成功安装软件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qs screenfetch 查看是否安装screenfetch</span><br><span class="line">whereis screenfetch 查看screenfetch安装位置，如果没有就是没有安装</span><br></pre></td></tr></table></figure></li>
<li>映射命令<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s 软件地址 /usr/bin </span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/01/09/vim%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/09/vim%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">vim学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-09 10:57:33" itemprop="dateCreated datePublished" datetime="2023-01-09T10:57:33+08:00">2023-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-07-12 13:47:15" itemprop="dateModified" datetime="2023-07-12T13:47:15+08:00">2023-07-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>学习vim</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/01/09/vim%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2023/01/03/cpp%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/03/cpp%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">c++基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-03 16:00:30" itemprop="dateCreated datePublished" datetime="2023-01-03T16:00:30+08:00">2023-01-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-05-22 15:26:00" itemprop="dateModified" datetime="2023-05-22T15:26:00+08:00">2023-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C-基础入门"><a href="#C-基础入门" class="headerlink" title="C++基础入门"></a>C++基础入门</h1><h2 id="一、初识C"><a href="#一、初识C" class="headerlink" title="一、初识C++"></a>一、初识C++</h2><h3 id="1-1-输出helloworld"><a href="#1-1-输出helloworld" class="headerlink" title="1.1 输出helloworld"></a>1.1 输出helloworld</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;helloworld&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-注释"><a href="#1-2-注释" class="headerlink" title="1.2 注释"></a>1.2 注释</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="1-3-变量"><a href="#1-3-变量" class="headerlink" title="1.3 变量"></a>1.3 变量</h3><p>同c</p>
<h3 id="1-4-常量"><a href="#1-4-常量" class="headerlink" title="1.4 常量"></a>1.4 常量</h3><p>用于记录程序中<strong>不可修改</strong>的数据</p>
<ol>
<li><h1 id="define宏常量：-define-常量名-常量值"><a href="#define宏常量：-define-常量名-常量值" class="headerlink" title="define宏常量：#define 常量名 常量值"></a>define宏常量：<code>#define 常量名 常量值</code></h1></li>
<li>const修饰的变量：<code>const 数据类型 常量名 = 常量值</code></li>
</ol>
<h3 id="1-5-标识符命名规则"><a href="#1-5-标识符命名规则" class="headerlink" title="1.5 标识符命名规则"></a>1.5 标识符命名规则</h3><p>c++规定给标识符（变量，常量）命名时候，有自己的规则</p>
<ul>
<li>标识符不能是关键字</li>
<li>标识符只能由字符、数字、下划线组成</li>
<li>第一个字符必须是字母或者下划线</li>
<li>标识符中字符区分大小写</li>
</ul>
<h3 id="1-6-数据宽度"><a href="#1-6-数据宽度" class="headerlink" title="1.6 数据宽度"></a>1.6 数据宽度</h3><h2 id="二、数据类型"><a href="#二、数据类型" class="headerlink" title="二、数据类型"></a>二、数据类型</h2><h3 id="2-1-整形"><a href="#2-1-整形" class="headerlink" title="2.1 整形"></a>2.1 整形</h3><div class="table-container">
<table>
<thead>
<tr>
<th>数据类型</th>
<th>占用空间</th>
<th>取值范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>short</td>
<td>2byte</td>
<td>-2^15~2^15-1</td>
</tr>
<tr>
<td>int</td>
<td>4byte</td>
<td>-2^31~2^31-1</td>
</tr>
<tr>
<td>long</td>
<td>windows:4byte,linux:4byte(32位),8byte(64位)</td>
<td>-2^31~2^31-1(4byte)</td>
</tr>
<tr>
<td>longlong</td>
<td>8byte</td>
<td>-2^63~2^63-1</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-2-sizeof"><a href="#2-2-sizeof" class="headerlink" title="2.2 sizeof"></a>2.2 sizeof</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;long 类型所占的内存空间为：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">long</span>) &lt;&lt; endl</span><br></pre></td></tr></table></figure>
<h3 id="2-3-实型-浮点型"><a href="#2-3-实型-浮点型" class="headerlink" title="2.3 实型(浮点型)"></a>2.3 实型(浮点型)</h3><ol>
<li>float</li>
<li>double</li>
</ol>
<p>二者区别在于表示的有效数字范围不同</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>数据类型</th>
<th>占用空间</th>
<th>有效数字范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>float</td>
<td>4字节</td>
<td>7位有效数字</td>
</tr>
<tr>
<td>double</td>
<td>8字节</td>
<td>15~16位有效数字</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="type">float</span> f1 = <span class="number">3.14f</span>;</span><br><span class="line">	<span class="type">double</span> d1 = <span class="number">3.14</span>;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; f1 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; d1 &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-4-字符型"><a href="#2-4-字符型" class="headerlink" title="2.4 字符型"></a>2.4 字符型</h3><p><code>char ch = &#39;a&#39;;</code></p>
<ul>
<li>在显示字符型变量时，用单引号将字符括起来，不要用双引号</li>
<li>单引号只能有一个字符，不可以是字符串</li>
<li>C和C++中字符型变量只占用1个字节</li>
<li>字符型变量并不是把字符本身放到内存中存储，而是将对应的ASCII编码放入到存储单元</li>
</ul>
<h3 id="2-5-字符串型"><a href="#2-5-字符串型" class="headerlink" title="2.5 字符串型"></a>2.5 字符串型</h3><p>C++中有两种风格的写法</p>
<ol>
<li>C风格：<code>char 变量名[] = &quot;字符串值&quot;</code></li>
<li>C++：<code>string 变量名 = &quot;字符串值&quot;</code></li>
</ol>
<h3 id="2-6-bool"><a href="#2-6-bool" class="headerlink" title="2.6 bool"></a>2.6 bool</h3><ul>
<li>true</li>
<li>false</li>
</ul>
<p>bool占用1个字节大小</p>
<h3 id="2-6-数据的输入"><a href="#2-6-数据的输入" class="headerlink" title="2.6 数据的输入"></a>2.6 数据的输入</h3><p><code>cin &gt;&gt; 变量</code></p>
<h2 id="三、运算符"><a href="#三、运算符" class="headerlink" title="三、运算符"></a>三、运算符</h2><h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>术语</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>！</td>
<td>与</td>
<td>!a</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>或</td>
<td>a&amp;&amp;b</td>
</tr>
<tr>
<td>\</td>
<td>\</td>
<td></td>
<td>非</td>
<td>a\</td>
<td>\</td>
<td>b</td>
</tr>
</tbody>
</table>
</div>
<h2 id="四、程序流程结构"><a href="#四、程序流程结构" class="headerlink" title="四、程序流程结构"></a>四、程序流程结构</h2><h3 id="猜数字"><a href="#猜数字" class="headerlink" title="猜数字"></a>猜数字</h3><p>系统随机生成一个1到100的数字，玩家进行猜测，如果猜错，提示玩家数字过大或过小，如果猜对则恭喜玩家胜利，并推出游戏</p>
<p><code>rand() % 100</code>:生成一个0~99的随机数字</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> a = <span class="built_in">rand</span>() % <span class="number">100</span> + <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> b=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> (b != a) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入你猜测的数字:&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cin &gt;&gt; b;</span><br><span class="line">		<span class="keyword">if</span> (b &gt; a) &#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;过大\n&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (b &lt; a) &#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;过小\n&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;恭喜成gong，答案是&quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="水仙花数"><a href="#水仙花数" class="headerlink" title="水仙花数"></a>水仙花数</h3><p>案例描述：水仙花数是指一个3位数，它的每个位上的数字的3次幂之和等于它本身</p>
<p>例如：1^3+5^3+3^3=153</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		<span class="type">int</span> x, y, z;</span><br><span class="line">		x = a / <span class="number">100</span>;</span><br><span class="line">		y = (a / <span class="number">10</span>) % <span class="number">10</span>;</span><br><span class="line">		z = a % <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">pow</span>(x, <span class="number">3</span>) + <span class="built_in">pow</span>(y, <span class="number">3</span>) + <span class="built_in">pow</span>(z, <span class="number">3</span>) == a) &#123;</span><br><span class="line">			cout &lt;&lt; a &lt;&lt; <span class="string">&quot;\n&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		a++;</span><br><span class="line">	&#125; <span class="keyword">while</span> (a&lt;<span class="number">1000</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="敲桌子"><a href="#敲桌子" class="headerlink" title="敲桌子"></a>敲桌子</h3><p>案例描述：从1开始数到100，如果数字个位含有7，或者数字十位上含有7，或者是该数字是7的倍数，我们打印敲桌子，其余数字直接打印输出。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		<span class="type">int</span> x, y;</span><br><span class="line">		x = a / <span class="number">10</span>;</span><br><span class="line">		y = a  % <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">if</span> (x == <span class="number">7</span> || y == <span class="number">7</span> || a % <span class="number">7</span> == <span class="number">0</span>) &#123;</span><br><span class="line">			cout &lt;&lt; a &lt;&lt; <span class="string">&quot;敲桌子\n&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		a++;</span><br><span class="line">	&#125; <span class="keyword">while</span> (a&lt;<span class="number">100</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="乘法口诀表"><a href="#乘法口诀表" class="headerlink" title="乘法口诀表"></a>乘法口诀表</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (a &lt; <span class="number">10</span>) &#123;</span><br><span class="line">		b = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span> (b &lt;= a) &#123;</span><br><span class="line">			cout &lt;&lt; b &lt;&lt; <span class="string">&quot;*&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;=&quot;</span> &lt;&lt; a * b &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">			b++;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">		a++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="五、数组"><a href="#五、数组" class="headerlink" title="五、数组"></a>五、数组</h2><p>三种定义方式：</p>
<ol>
<li><code>数据类型 数组名[数组长度]</code></li>
<li><code>数据类型 数组名[数组长度] = &#123;值1,值2...&#125;</code></li>
<li><code>数据类型 数组名[]=&#123;值1,值2...&#125;</code></li>
</ol>
<h2 id="六、函数"><a href="#六、函数" class="headerlink" title="六、函数"></a>六、函数</h2><p>函数可以声明多次，但只能定义一次</p>
<h3 id="函数的分文件编写"><a href="#函数的分文件编写" class="headerlink" title="函数的分文件编写"></a>函数的分文件编写</h3><ol>
<li>创建后缀名为.h的头文件</li>
<li>创建后缀名为.cpp的源文件</li>
<li>在头文件里写函数的声明</li>
<li>在源文件里写函数的定义</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//myswap.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//myswap.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myswap.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> temp = a;</span><br><span class="line">	a = b;</span><br><span class="line">	b = temp;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//源.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myswap.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line">	<span class="built_in">swap</span>(a, b);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2022/08/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">操作系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-09 16:27:19" itemprop="dateCreated datePublished" datetime="2022-08-09T16:27:19+08:00">2022-08-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-03-12 21:39:21" itemprop="dateModified" datetime="2023-03-12T21:39:21+08:00">2023-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h1><h2 id="一、计算机系统概述"><a href="#一、计算机系统概述" class="headerlink" title="一、计算机系统概述"></a>一、计算机系统概述</h2><h3 id="操作系统运行环境"><a href="#操作系统运行环境" class="headerlink" title="操作系统运行环境"></a>操作系统运行环境</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://bigshuimu.github.io/2022/08/01/PAT%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
      <meta itemprop="name" content="水木君">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水木君的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/01/PAT%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">PAT刷题笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-01 22:08:41" itemprop="dateCreated datePublished" datetime="2022-08-01T22:08:41+08:00">2022-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-15 21:08:46" itemprop="dateModified" datetime="2023-02-15T21:08:46+08:00">2023-02-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="PAT乙级"><a href="#PAT乙级" class="headerlink" title="PAT乙级"></a>PAT乙级</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="四舍五入"><a href="#四舍五入" class="headerlink" title="四舍五入"></a>四舍五入</h3><p><code>(int)(a + 0.5)</code></p>
<p>对a进行四舍五入</p>
<p>原理：</p>
<p>因为(int)会直接截断小数点后面的数字。</p>
<h3 id="读取中间带空格的字符串"><a href="#读取中间带空格的字符串" class="headerlink" title="读取中间带空格的字符串"></a>读取中间带空格的字符串</h3><p>使用<code>scanf(&quot;%s&quot;,a)</code>读取的字符串会以空格为结束标志，例如<code>hello world</code>,读取为<code>hello</code></p>
<p>使用<code>gets(a)</code>可以回车为结束标志，例如<code>hello world</code>,读取为<code>hello world</code></p>
<p>​    </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="水木君"
      src="https://bigshuimu.oss-cn-nanjing.aliyuncs.com/personal/cat.jpg">
  <p class="site-author-name" itemprop="name">水木君</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/bigshuimu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;bigshuimu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://armke.github.io/" title="https:&#x2F;&#x2F;armke.github.io&#x2F;" rel="noopener" target="_blank">armke</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">水木君</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
